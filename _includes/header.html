<header class="site-header" role="banner">

  <div class="wrapper">
    <a class="site-title" rel="author" href="{{ "/" | relative_url }}">{{ site.title | escape }}</a>

    <nav class="site-nav">
      <input type="checkbox" id="nav-trigger" class="nav-trigger" />
      <label for="nav-trigger">
        <span class="menu-icon">
          <svg viewBox="0 0 18 15" width="18px" height="15px">
            <path
              d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z" />
          </svg>
        </span>
      </label>

      <div class="trigger">
        <!-- Core Domain Links -->
        <a class="page-link" href="{{ "/categories/ai/" | relative_url }}" data-i18n="cat_ai">AI</a>
        <a class="page-link" href="{{ "/categories/tech/" | relative_url }}" data-i18n="cat_tech">Tech</a>
        <a class="page-link" href="{{ "/categories/finance/" | relative_url }}" data-i18n="cat_finance">Finance</a>
        <a class="page-link" href="{{ "/categories/engineering/" | relative_url }}" data-i18n="cat_engineering">Engineering</a>
        <a class="page-link" href="{{ "/categories/global-affairs/" | relative_url }}" data-i18n="cat_global">Global Affairs</a>

        <!-- Language Switcher -->
        <a class="page-link lang-toggle-btn" href="#" id="lang-switcher" onclick="toggleLanguage(); return false;"
          title="Switch Language">
          <span id="lang-text">EN</span>
        </a>

        <!-- Dark Mode Toggle -->
        <a class="page-link theme-toggle-btn" href="#" id="theme-toggle" onclick="toggleTheme(); return false;"
          title="Toggle dark mode">
          <span id="theme-text">Dark</span>
        </a>
      </div>
    </nav>
  </div>
</header>

<script>
  (function () {
    var translations = {
      zh: {
        cat_ai: "AI",
        cat_tech: "科技",
        cat_finance: "金融",
        cat_engineering: "工程",
        cat_global: "全球事務",
        posts: "文章",
        home: "首頁",
        theme_dark: "深色",
        theme_light: "淺色"
      },
      en: {
        cat_ai: "AI",
        cat_tech: "Tech",
        cat_finance: "Finance",
        cat_engineering: "Engineering",
        cat_global: "Global Affairs",
        posts: "Posts",
        home: "Home",
        theme_dark: "Dark",
        theme_light: "Light"
      }
    };

    function toggleLanguage() {
      var currentLang = localStorage.getItem('site-lang') || 'zh';
      var newLang = currentLang === 'zh' ? 'en' : 'zh';
      localStorage.setItem('site-lang', newLang);
      location.reload();
    }

    function updateNavbar() {
      var currentLang = localStorage.getItem('site-lang') || 'zh';
      var t = translations[currentLang];
      var elements = document.querySelectorAll('[data-i18n]');
      elements.forEach(function (el) {
        var key = el.getAttribute('data-i18n');
        if (t[key]) { el.textContent = t[key]; }
      });
      var btn = document.getElementById('lang-text');
      if (btn) { btn.textContent = currentLang === 'zh' ? 'EN' : '中文'; }
    }

    function toggleTheme() {
      var currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
      var newTheme = currentTheme === 'light' ? 'dark' : 'light';
      localStorage.setItem('site-theme', newTheme);
      document.documentElement.setAttribute('data-theme', newTheme);
      updateThemeText();
    }

    function updateThemeText() {
      var currentLang = localStorage.getItem('site-lang') || 'zh';
      var currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
      var t = translations[currentLang];
      var themeText = document.getElementById('theme-text');
      if (themeText) {
        themeText.textContent = currentTheme === 'light' ? t.theme_dark : t.theme_light;
      }
    }

    window.toggleLanguage = toggleLanguage;
    window.toggleTheme = toggleTheme;

    document.addEventListener('DOMContentLoaded', function() {
      updateNavbar();
      updateThemeText();
      document.documentElement.classList.remove('site-loading');
    });
  })();
</script>
