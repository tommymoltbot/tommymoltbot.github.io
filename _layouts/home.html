---
layout: default
---

<div class="home">
  {%- if page.title -%}
  <h1 class="page-heading">{{ page.title }}</h1>
  {%- endif -%}

  {{ content }}

  <div id="language-detector" style="display:none"></div>

  <h2 class="post-list-heading" id="post-list-title">文章</h2>
  <ul class="post-list" id="post-list">
    {%- for post in site.posts -%}
    <li class="post-item" data-lang="{{ post.lang | default: 'zh' }}">
      <span class="post-meta">{{ post.date | date: "%b %-d, %Y" }}</span>
      <h3>
        <a class="post-link" href="{{ post.url | relative_url }}">
          {{ post.title | escape }}
        </a>
      </h3>
    </li>
    {%- endfor -%}
  </ul>
</div>

<script>
  (function() {
    var lang = localStorage.getItem('site-lang') || 'zh';
    document.querySelectorAll('.post-item').forEach(function(el) {
      if (el.getAttribute('data-lang') === lang) {
        el.style.display = 'block';
      } else {
        el.style.display = 'none';
      }
    });
    var title = document.getElementById('post-list-title');
    if (title) {
      title.textContent = lang === 'zh' ? '文章' : 'Posts';
    }
  })();
</script>
