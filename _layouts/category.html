---
layout: default
---

<div class="home">
  <h1 class="page-heading">{{ page.title }}</h1>

  <ul class="post-list" id="post-list">
    {%- for post in site.posts -%}
      {% assign cat_match = false %}
      {% for cat in post.categories %}
        {% if cat == page.title %}
          {% assign cat_match = true %}
        {% endif %}
      {% endfor %}

      {% if cat_match %}
        <li class="post-item" data-lang="{{ post.lang | default: 'zh' }}" data-title="{{ post.title | escape | downcase }}">
          <span class="post-meta">{{ post.date | date: "%b %-d, %Y" }}</span>
          <h3>
            <a class="post-link" href="{{ post.url | relative_url }}">
              {{ post.title | escape }}
            </a>
          </h3>
        </li>
      {% endif %}
    {%- endfor -%}
  </ul>
</div>

<script>
  (function() {
    function filterPosts() {
      var lang = localStorage.getItem('site-lang') || 'zh';
      var items = document.querySelectorAll('.post-item');
      items.forEach(function(el) {
        if (el.getAttribute('data-lang') === lang) {
          el.style.display = 'block';
        } else {
          el.style.display = 'none';
        }
      });
    }
    document.addEventListener('DOMContentLoaded', filterPosts);
    if (document.readyState === 'interactive' || document.readyState === 'complete') {
      filterPosts();
    }
  })();
</script>
